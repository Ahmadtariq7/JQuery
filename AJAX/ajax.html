<!DOCTYPE html>
<html>

<head>
    <title> JQuery Crash Course </title>
    <!-- including Jquery-->
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <!-- Including CSS from here -->
    <style>
        boddy {
            font-size: 17px;
            font-family: Arial;
            background: lightgray;
            line-height: 1.5em;
        }

        header {
            background: #333;
            color: white;
            padding: 20px;
            text-align: center;
            border-bottom: 4px black solid;
            margin-bottom: 10px;

        }

        #container {
            width: 90%;
            margin: auto;
            padding: 10px;
        }
    </style>
</head>

<body>
    <header>
        <h1>JQuery Crash Course | AJAX </h1>
    </header>
    <div id="container">
        <div id="result"></div>
        <ul id="users"></ul>
        <h3>Add Post</h3>
        <form id="postForm" action="https://jsonplaceholder.typicode.com/posts">
            <input type="text" id="title" placeholder="Title">
            <br>
            <textarea placeholder="Body" id="body"></textarea> <br>
            <input type="submit" value="submit">
        </form>
    </div>
    <script>
// AJAX Stands for "Asynchronous JavaScript and XML". It allows you to do things like make requests behind-
// the scene so you don't have to refresh the page, just update certain parts of application.
// You can fetch Json and get other HTMl pages from it , you can work with APIS, get data and work on it.
// So let's start. I have test.html and have html in it, want to bring content from it using AJAX.
        $(document).ready(function() {
        //LOAD METHOD
           /* // $('#result').load('test.html'); //bringing content from other file using load
            $('#result').load('test.html', function(responseTxt,
            statusTxt, xhr) { // checking response, errors
                if(statusTxt == "success") {
                    alert('It went Fine');
                } else if(statusTxt == "error") {
                    alert("Error: "+ xhr.statusText); // when file not found, it will give error..with status
                }
            }); */
        //Get method
            // $.get('test.html', function(data) {
                // $('#result').html(data);
            // });
// we want to load/get JSon data so.
            // $.getJSON('users.json', function(data) {
            //     $.each(data, function(i, user){ // users are pulled in from users.json 
            //         $('ul#users').append('<li>'+user.firstName+'</li>'); // putting in list 
            //     });
            // });
// Ajax method is good from all 
         /*   $.ajax({ //see ajax syntax, first it takes method(by default it is get) than url, datatype.
                method: 'Get',
                url: 'https://jsonplaceholder.typicode.com/posts', // this is random website for posts..
                dataType: 'json',
            }).done(function(data) { //.done with function with parameter data..
                console.log(data);
                $.map(data, function(post, i) { //posting all data on page
                    $('#result').append('<h3>'+post.title+'</h3><p>'+post.body+'</p>');
                });
            });  */
// How to make a post request
            $('#postForm').submit(function(e) {
                e.preventDefault();

                var title = $('#title').val();
                var body = $('#body').val();
                var url = $(this).attr('action');

                $.post(url, {title:title, body:body}).done(function(data){
                    console.log('Post Saved');
                    console.log(data); 
                });
                // thats how we make post requests and save on different API's

            });
        });
    
    </script>
</body>

</html>